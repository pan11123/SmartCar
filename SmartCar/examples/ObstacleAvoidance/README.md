# 超声波避障示例 (ObstacleAvoidance)

## 功能介绍

本示例演示了如何使用SmartCar库控制智能小车实现超声波避障功能。通过超声波传感器检测前方障碍物，小车能够自动避开障碍物继续行驶，展示了基本的避障控制算法的实现。

## 工作原理

1. 初始化SmartCar对象，设置电机引脚和速度
2. 配置超声波传感器引脚和舵机引脚
3. 配置LCD显示屏引脚
4. 循环执行以下操作：
   - 通过舵机控制超声波传感器朝向前方，测量前方距离
   - 判断前方距离是否低于安全距离（默认32厘米）
   - 根据距离信息控制小车行为：
     * 距离大于安全距离：继续前进
     * 距离小于安全距离：执行多方向避障动作
       1. 后退减速并停止
       2. 舵机转向左侧，测量左侧距离并在LCD上显示
       3. 舵机转向右侧，测量右侧距离并在LCD上显示
       4. 根据左右两侧距离决定行驶方向：
          - 如果左右两侧距离都小于35厘米，执行掉头动作
          - 如果左侧距离大于右侧距离，向左转
          - 如果右侧距离大于左侧距离，向右转

## 硬件连接

- 左电机前进引脚：5
- 左电机后退引脚：9
- 右电机前进引脚：6
- 右电机后退引脚：10
- 超声波触发引脚：A4
- 超声波回声引脚：A5
- 按键引脚：A0
- 蜂鸣器引脚：A1

## 使用方法

1. 将代码上传到Arduino板
2. 打开串口监视器（波特率9600）
3. 按下按键启动小车
4. 小车将自动开始运行，并通过串口输出当前检测到的距离信息

## 避障功能说明

- **正常行驶**：当前方无障碍物或距离大于安全距离时，小车保持直线行驶
- **避障动作**：检测到障碍物时，小车会执行以下动作序列：
  1. 停止前进
  2. 后退一小段距离
  3. 随机选择左转或右转
  4. 继续前进

## 参数调整

可以根据实际需求调整以下参数：

- 电机速度：通过`car.setSpeed()`函数调整，默认左右电机速度分别为160和165
- 安全距离：修改`SAFE_DISTANCE`常量，默认为32厘米
- 避障判断距离：在`avoidObstacleWithServo`方法中，左右两侧障碍物判断距离默认为35厘米
- 舵机角度：可以调整舵机的角度范围，默认前方为90度，左侧为175度，右侧为0度
- 舵机PWM脉冲数：可以调整产生PWM脉冲的次数，影响舵机转动的稳定性
- 避障动作的持续时间：可在SmartCar库中调整各个动作的执行时间

## 硬件连接

- 舵机连接到数字引脚2
- LCD显示屏连接到数字引脚3(RS)、4(EN)、7(D4)、8(D5)、11(D6)、12(D7)
- 超声波传感器的Trig连接到模拟引脚A4，Echo连接到模拟引脚A5
- 左电机控制引脚连接到数字引脚5(前进)和9(后退)
- 右电机控制引脚连接到数字引脚6(前进)和10(后退)
- 按键连接到模拟引脚A0
- 蜂鸣器连接到模拟引脚A1

## 注意事项

- 确保超声波传感器安装牢固且水平
- 超声波传感器的测量范围为2-400厘米
- 某些材质的障碍物可能会影响超声波的反射效果
- 环境噪声可能影响超声波测距的准确性
- 电池电量不足可能影响避障效果
- 建议在较为开阔的环境中测试避障功能